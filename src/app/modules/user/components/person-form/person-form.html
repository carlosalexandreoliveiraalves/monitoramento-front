<div class="flex items-center justify-between mb-6 text-primary">
  <h2 class="text-2xl font-bold">{{ personId ? 'Editar' : 'Novo' }} Usuário</h2>
  <button (click)="close.emit()" class="text-gray-400 hover:text-gray-600">
    <span class="material-symbols-outlined">close</span>
  </button>
</div>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
  <div class="flex flex-col gap-1">
    <label class="font-semibold text-gray-600">Nome</label>
    <input
      type="text"
      formControlName="name"
      class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300"
      placeholder="Ex: João da Silva"
    />
    <span
      *ngIf="form.get('name')?.invalid && form.get('name')?.touched"
      class="text-red-500 text-sm"
    >
      Nome é obrigatório (min 3 chars).
    </span>
  </div>

  <div class="flex flex-col gap-1">
    <label class="font-semibold text-gray-600">Email</label>
    <input
      type="email"
      formControlName="email"
      class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300"
      placeholder="joao@email.com"
    />
    <span
      *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
      class="text-red-500 text-sm"
    >
      Email inválido.
    </span>
  </div>

  <div class="flex flex-col gap-1">
    <label class="font-semibold text-gray-600">Função (Role)</label>
    <select
      formControlName="role"
      class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 bg-white"
    >
      <option value="" disabled>Selecione...</option>
      <option value="ADMIN">Administrador</option>
      <option value="USER">Usuário</option>
      <option value="VIEWER">Visualizador</option>
    </select>
    <span
      *ngIf="form.get('role')?.invalid && form.get('role')?.touched"
      class="text-red-500 text-sm"
    >
      Selecione uma função.
    </span>
  </div>

  <div class="flex gap-3 mt-4">
    <button
      type="button"
      (click)="close.emit()"
      class="w-1/3 py-3 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50"
    >
      Cancelar
    </button>
    <button
      type="submit"
      [disabled]="form.invalid"
      class="w-2/3 py-3 rounded-lg btn-primary shadow hover:shadow-lg disabled:opacity-50"
    >
      Salvar
    </button>
  </div>
</form>
